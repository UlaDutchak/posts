(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{23:function(e,t,c){},24:function(e,t,c){},34:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(14),o=c.n(a),r=c(5),i=(c(23),c(18)),l=c(3),d=(c(24),c(2)),j="https://simple-blog-api.crew.red/posts",b=function(e){return fetch("".concat(j,"/").concat(e,"?_embed=comments")).then((function(e){if(!e.ok)throw new Error("Error");return e.json()}))},u=c(0),h=function(){return Object(u.jsxs)("ul",{className:"nav justify-content-center",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{className:"nav-link active","aria-current":"page",to:"/home",children:"Home page"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{className:"nav-link",to:"/posts",children:"All Posts"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{className:"nav-link",to:"/new",children:"Add Post"})})]})},m=(c(34),function(){return Object(u.jsx)("div",{className:"spinner-border loader",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})})}),p=function(e){var t=e.postId,c=e.addNewComment,s=Object(n.useState)(""),a=Object(l.a)(s,2),o=a[0],r=a[1],i=function(e){e.preventDefault(),c({body:o,postId:t}),r("")};return Object(u.jsxs)("form",{children:[Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"form-control","aria-label":"With textarea",value:o,onChange:function(e){return function(e){r(e.target.value)}(e)}})}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary",value:o,onClick:function(e){return i(e)},children:"Add a comment"})]})},O=function(e){var t,c,s=e.selectedPostId,a=Object(n.useState)({}),o=Object(l.a)(a,2),r=o[0],i=o[1],d=Object(n.useState)(!0),h=Object(l.a)(d,2),O=h[0],x=h[1],f=Object(n.useState)(!0),v=Object(l.a)(f,2),N=v[0],y=v[1];Object(n.useEffect)((function(){y(!0),b(s).then((function(e){i(e),y(!1)})).catch((function(e){throw i(null),new Error(e)}))}),[s]);return N?Object(u.jsx)(m,{}):Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h2",{children:"Post details:"}),Object(u.jsxs)("div",{className:"card mb-2",children:[Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:null===r||void 0===r?void 0:r.title}),Object(u.jsx)("p",{className:"card-text",children:null===r||void 0===r?void 0:r.body})]}),Object(u.jsx)("ul",{className:"list-group list-group-flush",children:O&&Object(u.jsx)(u.Fragment,{children:null===r||void 0===r||null===(t=r.comments)||void 0===t?void 0:t.map((function(e){return Object(u.jsx)("li",{className:"list-group-item",children:Object(u.jsx)("p",{className:"ps-2",children:e.body})},e.id)}))})}),Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("button",{type:"button",className:"btn btn-info mb-4",onClick:function(){x(!O)},children:[O?"Hide ":"Show ","".concat(null===r||void 0===r||null===(c=r.comments)||void 0===c?void 0:c.length," comments")]})})]}),Object(u.jsx)(p,{postId:s,addNewComment:function(e){(function(e){return fetch("".concat(j,"comments"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(e)})})(e).then((function(){b(s),y(!0),y(!1)}))}})]})},x=c(17),f=c.n(x),v=function(e){var t=e.changePostId,c=e.selectedPostId,n=e.posts;return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h2",{className:"title text-center",children:"ALL Posts"}),n.map((function(e){return Object(u.jsxs)("div",{className:"card mb-4",children:[Object(u.jsx)("div",{className:"card-header",children:"Featured"}),Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:e.title}),Object(u.jsx)("p",{className:"card-text",children:e.body}),Object(u.jsx)(r.b,{to:"/posts/".concat(e.id),className:f()("me-2","btn btn-outline-success",{"btn btn-outline-success":c===e.id}),onClick:function(){c===e.id?t(0):t(e.id)},children:c===e.id?"Close":"Open"}),Object(u.jsx)(r.b,{to:"/update_post/".concat(e.id),className:"btn btn-outline-warning me-2",children:"Update"}),Object(u.jsx)("button",{type:"button",className:"btn btn-outline-danger me-2",onClick:function(){return t=e.id,fetch("".concat(j,"/").concat(t),{method:"DELETE"});var t},children:"Delete"})]})]},e.id)}))]})},N=function(e){var t=e.posts,c=e.loader,s=Object(n.useState)(0),a=Object(l.a)(s,2),o=a[0],r=a[1];return Object(n.useEffect)((function(){}),[t]),Object(u.jsxs)("div",{className:"row align-items-start",children:[Object(u.jsx)("div",{className:"col",children:c?Object(u.jsx)(u.Fragment,{children:0!==t.length?Object(u.jsx)(v,{changePostId:function(e){r(e)},selectedPostId:o,posts:t}):Object(u.jsx)("h2",{children:"have any posts yet"})}):Object(u.jsx)(m,{})}),Object(u.jsx)(d.b,{path:"/posts/:postId",exact:!0,children:0!==o&&Object(u.jsx)("div",{className:"col-lg-5",children:Object(u.jsx)(O,{selectedPostId:o})})})]})},y=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(""),o=Object(l.a)(a,2),i=o[0],b=o[1],h=(Object(d.g)()||"").postId,m=function(e){e.preventDefault(),function(e,t){fetch("".concat(j,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(e)})}({title:i,body:c},h),b(""),s("")};return Object(u.jsxs)("form",{className:"container",children:[Object(u.jsx)("h2",{className:"title text-center",children:"Add your post"}),Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("input",{name:"title",placeholder:"Post title",className:"form-control",value:i,onChange:function(e){return function(e){b(e.target.value)}(e)}})}),Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("textarea",{name:"body",placeholder:"Type post here",className:"form-control",value:c,onChange:function(e){return function(e){s(e.target.value)}(e)}})}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary me-2",onClick:function(e){return m(e)},children:"Update a post"}),Object(u.jsx)(r.b,{to:"/posts",className:"btn btn-danger",children:"Close"})]})},g=function(e){var t=e.maxId,c=Object(n.useState)(t),s=Object(l.a)(c,2),a=s[0],o=s[1],r=Object(n.useState)(""),i=Object(l.a)(r,2),d=i[0],b=i[1],h=Object(n.useState)(""),m=Object(l.a)(h,2),p=m[0],O=m[1],x=function(e){var t;e.preventDefault(),t={id:a+1,title:p,body:d},fetch("".concat(j),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}),o(a+1),O(""),b("")};return Object(u.jsxs)("form",{className:"container",children:[Object(u.jsx)("h2",{className:"title text-center",children:"Add your post"}),Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("input",{name:"title",placeholder:"Post title",className:"form-control",value:p,onChange:function(e){return function(e){O(e.target.value)}(e)}})}),Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("textarea",{name:"body",placeholder:"Type post here",className:"form-control",value:d,onChange:function(e){return function(e){b(e.target.value)}(e)}})}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(e){return x(e)},children:"Add a post"})]})},S=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),o=Object(l.a)(a,2),r=o[0],b=o[1];Object(n.useEffect)((function(){b(!1),fetch("".concat(j)).then((function(e){if(!e.ok)throw new Error("Error");return e.json()})).then((function(e){s(e),b(!0)}))}),[]);return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(h,{}),Object(u.jsxs)(d.d,{children:[Object(u.jsx)(d.b,{path:"/posts",children:Object(u.jsx)(N,{posts:c,loader:r})}),Object(u.jsx)(d.b,{path:"/new",children:Object(u.jsx)(g,{maxId:Math.max.apply(Math,Object(i.a)(c.map((function(e){return e.id}))))})}),Object(u.jsx)(d.b,{path:"/update_post/:postId",component:y}),Object(u.jsx)(d.a,{path:"/home",to:"/"})]})]})};c(35);o.a.render(Object(u.jsx)(r.a,{children:Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(S,{})})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.9ffd18e9.chunk.js.map